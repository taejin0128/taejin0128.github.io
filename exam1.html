<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link type="text/css" rel="stylesheet" href="css/stylesheetexam1.css"/>
		<script src="js/jquery.js"></script> 
    		<script type="text/javascript" src="d3/d3.v3.js"></script>
			
		<title> The number of IE students in the five universities </title>
	</head>
	
	<body>
		
		<div id="header">
			<h2> The number of IE students in different years for five universities </h2>
		</div>

		<div id="button">
			<a href="taejin0128.github.io/exam1-1.html"> Stacked Bar Chart </a>		
		</div>

		<div id="button">
			<a href="taejin0128.github.io/exam1-2.html"> Interactive Stacked Chart </a>		
		</div>

		<div id = "graph"> 
			<p> The number of senior IE students in the five universities </p>
		</div>

		<div id="footer">
		</div>


		<script type="text/javascript">

			var tempdataset;
			var dataset = [];
			var datatext = ["University A", "University B", "University C", "University D", "University E"];

			var margin = {top: 20, right: 20, bottom: 200, left: 70},
				 	 w = 590 - margin.left - margin.right,
			         h = 460 - margin.top - margin.bottom;

			var barPadding = 10;

			d3.json("data/exam1.json", function(error, data) {
				
				tempdataset = data[3];

				//Array for senior scores
				dataset[0] = +tempdataset["University A"];
				dataset[1] = +tempdataset["University B"];
				dataset[2] = +tempdataset["University C"];
				dataset[3] = +tempdataset["University D"];
				dataset[4] = +tempdataset["University E"];

				
				console.log(datatext);
				console.log(dataset);

				var x = d3.scale.ordinal()
					.domain(datatext)
					.rangeBands([0, w]);
				
				var y = d3.scale.linear()
					.domain([0, 120])
				    .range([h, 0]);

				var xAxis = d3.svg.axis()
				    .scale(x)
				    .orient("bottom");		    

				var yAxis = d3.svg.axis()
				    .scale(y)
				    .orient("left");
			
			//Create SVG element for graph
			var svg = d3.select("#graph")
				.append("svg")
				.attr("width", w + margin.left + margin.right)
				.attr("height", h + margin.top + margin.bottom)
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

				svg.selectAll("rect")
				    .data(dataset)
				    .enter()
				    .append("rect")
				    .attr("x", function(d, i) {
				   		console.log(dataset.length);
				   		return i * (w / dataset.length);
				    })
				    .attr("y", function(d) {
				   		return h - d * 2;
				    })
				    .attr("height", function(d) {
				   		return d * 2;
				    })
				    .attr("width", w / dataset.length - barPadding)
				    .attr("fill", function(d) {
						return "rgb(0, 0, " + (100) + ")";
				    });

				svg.append("g")
				    .attr("class", "x axis")
				    .attr("transform", "translate(0," + h + ")")
				    .call(xAxis)
				    .selectAll("text")
				    .attr("y", -6)
	    			.attr("x", -20)
	    		   	.attr("dx", "2em")
	    			.attr("transform", "rotate(90)")
	    			.style("text-anchor", "start");

				svg.append("g")
				    .attr("class", "y axis")
				    .call(yAxis)
				    .append("text")
				    //.attr("transform", "rotate(-90)")
				    .attr("x", 80)
				    .attr("y", -20)
				    .attr("dy", ".71em")
				    .style("text-anchor", "end")
				    .text("students number");
			
			   });
			
		</script>
		
	</body>
</html>
